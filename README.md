# Using Supervised Machine Learning and Genetic Algorithm Variable Selection to Predict Institutionals Graduation Rates

### Methods:
* Run Decision Tree and Multiple Linear Regression on IPEDS data to predict graduation rate. These results will act as our basaeline.
* Test various parameters for the Decision Tree
* Test various parameters for the GA for both ML algorithms.

### Coding References:

https://www.kaggle.com/code/tanmayunhale/genetic-algorithm-for-feature-selection

https://kushalmukherjee.medium.com/a-brief-introduction-to-genetic-algorithm-and-its-use-in-feature-selection-using-deap-81c7e2a3d3b9

https://towardsdatascience.com/introduction-to-genetic-algorithms-including-example-code-e396e98d8bf3


### Data Queries:
Full access databases used in this study can be found at https://nces.ed.gov/ipeds/use-the-data/download-access-database.

*Undergraduate bachalors graduation rates from 4-year universities*

SELECT HD2021.INSTNM, HD2021.STABBR, HD2021.ZIP, HD2021.OBEREG, gr.GBA6RTT, gr.GBA6RTM, gr.GBA6RTW
FROM DRVGR2021 AS gr LEFT JOIN HD2021 ON gr.UNITID = HD2021.UNITID
WHERE HD2021.ICLEVEL = 1;

Note: This query get the bachalors degree graduation rates within 6 year from the 2015 cohort of full-time first-time (undergraduate) students. This data is from the 2021-2022 database. Graduation rates will be the response in our study.

SELECT EF2016.UNITID, EF2016.EFFT, EF2016.EFLEVEL
FROM EF2016
WHERE EFLEVEL in (30, 31);

Note: The above query pulls undergraduate fall enrollment from the 2016-2017 database.  This data is used as a filter on graduation rates.

*Predictive Features*

SELECT HD2016.UNITID, HD2016.OPEFLAG, HD2016.SECTOR, HD2016.DEGGRANT, HD2016.HBCU, HD2016.HOSPITAL, HD2016.CARNEGIE, HD2016.PSET4FLG, IC2016.PEO1ISTR, IC2016.PEO2ISTR, IC2016.PEO3ISTR, IC2016.PEO4ISTR, IC2016.RELAFFIL, IC2016.LEVEL7, IC2016.LEVEL8, IC2016.LEVEL17, IC2016.LEVEL18, IC2016.LEVEL19, IC2016.OPENADMP, IC2016.CREDITS1, IC2016.CREDITS2, IC2016.CREDITS3, IC2016.CREDITS4, IC2016.SLO5, IC2016.SLO6, IC2016.STUSRV1, IC2016.STUSRV2, IC2016.STUSRV3, IC2016.STUSRV4, IC2016.STUSRV8, IC2016.ATHASSOC, IC2016.SPORT1, IC2016.CONFNO1, IC2016.SPORT2, IC2016.CONFNO2, IC2016.SPORT3, IC2016.CONFNO3, IC2016.SPORT4, IC2016.CONFNO4, IC2016.APPLFEEU, IC2016.ROOM, IC2016.ROOMCAP, IC2016.BOARD, IC2016.RMBRDAMT, IC2016.ALLONCAM, IC2016.TUITPL, IC2016.TUITPL1, IC2016.TUITPL2, IC2016.TUITPL3, IC2016.TUITPL4, IC2016.DISTCRS, IC2016.LIBRES1, IC2016.LIBRES2, IC2016.LIBRES3, IC2016.LIBRES4, IC2016.LIBRES5, IC2016.LIBRES6, IC2016.LIBRES9, IC2016.DISAB, IC2016_AY.TUITION1, IC2016_AY.FEE1, IC2016_AY.HRCHG1, IC2016_AY.TUITION2, IC2016_AY.FEE2, IC2016_AY.HRCHG2, IC2016_AY.TUITION3, IC2016_AY.FEE3, IC2016_AY.HRCHG3, IC2016_AY.chg2ay2, IC2016_AY.chg2at2, IC2016_AY.chg2af2, IC2016_AY.chg2ay3, IC2016_AY.chg2at3, IC2016_AY.chg2af3, IC2016_AY.chg3ay2, IC2016_AY.chg3at2, IC2016_AY.chg3af2, IC2016_AY.chg3ay3, IC2016_AY.chg3at3, IC2016_AY.chg3af3, DRVEF2016.RMINSTTP, DRVEF2016.RMOUSTTP, DRVEF2016.RMFRGNCP, DRVEF2016.DVEF13, DRVEF2016.DVEF14, DRVEF2016.DVEF15, DRVEF2016.ENRTOT, DRVEF2016.EFUG, DRVEF2016.EFUG1ST, DRVEF2016.EFUGTRN, DRVEF2016.EFUGCNT, DRVEF2016.PCUENRAN, DRVEF2016.PCUENRAP, DRVEF2016.PCUENRBK, DRVEF2016.PCUENRHS, DRVEF2016.PCUENRWH, DRVEF2016.PCUENR2M, DRVEF2016.PCUENRUN, DRVEF2016.PCUENRNR, DRVEF2016.PCUENRW, DRVEF2016.EFUGFT, DRVEF2016.EFUGPT, DRVEF2016.PCUENRNH, DRVEF2016.PCUENRAS, DRVEF2016.PCUDEEXC, DRVEF2016.PCUDESOM, DRVEF2016.PCUDENON, DRVAL2016.LPBOOKSP, DRVAL2016.LPMEDIAP, DRVAL2016.LEBOOKSP, DRVAL2016.LEDATABP, DRVAL2016.LEMEDIAP, DRVAL2016.LSALWAGP, DRVAL2016.LFRNGBNP, DRVAL2016.LEXMSBBP, DRVAL2016.LEXMSCSP, DRVAL2016.LEXMSOTP, DRVAL2016.LEXOMTLP, DRVAL2016.LEXPTOTF, DRVAL2016.LPSERIAP, DRVAL2016.LESERIAP, DRVF2016.F1CORREV, DRVF2016.F3GVGCPC, DRVF2016.F1TUFEPC, DRVF2016.F1STAPPC, DRVF2016.F1LCAPPC, DRVF2016.F1GVGCPC, DRVF2016.F1PGGCPC, DRVF2016.F1INVRPC, DRVF2016.F1OTRVPC, DRVF2016.F1COREXP, DRVF2016.F1INSTPC, DRVF2016.F1RSRCPC, DRVF2016.F1PBSVPC, DRVF2016.F1ACSPPC, DRVF2016.F1STSVPC, DRVF2016.F1INSUPC, DRVF2016.F1OTEXPC, DRVF2016.F1SAFBPC, DRVF2016.F1EQUITR, DRVF2016.F1ENDMFT, DRVF2016.F2CORREV, DRVF2016.F2TUFEPC, DRVF2016.F2GVGCPC, DRVF2016.F2PGGCPC, DRVF2016.F2INVRPC, DRVF2016.F2OTRVPC, DRVF2016.F2COREXP, DRVF2016.F2INSTPC, DRVF2016.F2RSRCPC, DRVF2016.F2PBSVPC, DRVF2016.F2ACSPPC, DRVF2016.F2STSVPC, DRVF2016.F2INSUPC, DRVF2016.F2OTEXPC, DRVF2016.F2SAFBPC, DRVF2016.F2ENDMFT, DRVF2016.F2EQUITR, DRVF2016.F2SAFBPC, DRVF2016.F3CORREV, DRVF2016.F3TUFEPC, DRVF2016.F3SSEAPC, DRVF2016.F3OTRVPC, DRVF2016.F3TUFEFT, DRVF2016.F3SSEAFT, DRVF2016.F3OTRVFT, DRVF2016.F3COREXP, DRVF2016.F3INSTPC, DRVF2016.F3OTEXPC, DRVF2016.F3EQUITR, DRVF2016.F3PGGCPC, DRVF2016.F3INVRPC, DRVF2016.F3RSRCPC, DRVF2016.F3PBSVPC, DRVF2016.F3ACSPPC, DRVF2016.F3STSVPC, DRVF2016.F3INSUPC, DRVF2016.F3SAFBPC, DRVF2016.F3SWINSP, DRVF2016.F3SWRSRP, DRVF2016.F3SWPBSP, DRVF2016.F3SWACSP, DRVF2016.F3SWSTSP, DRVF2016.F3SWISPP, DRVF2016.F3SWOTEP, DRVF2016.F3SWCREP, DRVF2016.F1SWCREP, DRVF2016.F1SWINSP, DRVF2016.F1SWRSRP, DRVF2016.F1SWPBSP, DRVF2016.F1SWACSP, DRVF2016.F1SWSTSP, DRVF2016.F1SWISPP, DRVF2016.F1SWOTEP, DRVF2016.F2SWCREP, DRVF2016.F2SWINSP, DRVF2016.F2SWRSRP, DRVF2016.F2SWPBSP, DRVF2016.F2SWACSP, DRVF2016.F2SWSTSP, DRVF2016.F2SWISPP, DRVF2016.F2SWOTEP, DRVHR2016.SALTOTL, DRVHR2016.SalProf, DRVHR2016.SalAssc, DRVHR2016.SalAsst, DRVHR2016.SalInst, DRVHR2016.Sallect, DRVHR2016.SALNRNK, DRVHR2016.SFTETOTL, DRVHR2016.SFTEPSTC, DRVHR2016.SFTELCAI, DRVIC2016.CINSON, DRVIC2016.COTSON, DRVIC2016.CINSOFF, DRVIC2016.COTSOFF, DRVIC2016.TUFEYR2, DRVIC2016.TUFEYR3, FLAGS2016.PRCH_EF, FLAGS2016.IDX_EF, FLAGS2016.PRCH_F, FLAGS2016.IDX_F, FLAGS2016.PRCH_SFA, FLAGS2016.IDX_SFA
FROM (((((((HD2016 LEFT JOIN IC2016 ON HD2016.UNITID = IC2016.UNITID) INNER JOIN DRVEF2016 ON HD2016.UNITID = DRVEF2016.UNITID) INNER JOIN DRVAL2016 ON HD2016.UNITID = DRVAL2016.UNITID) INNER JOIN DRVF2016 ON HD2016.UNITID = DRVF2016.UNITID) INNER JOIN DRVHR2016 ON HD2016.UNITID = DRVHR2016.UNITID) INNER JOIN DRVIC2016 ON HD2016.UNITID = DRVIC2016.UNITID) INNER JOIN FLAGS2016 ON HD2016.UNITID = FLAGS2016.UNITID) INNER JOIN IC2016_AY ON HD2016.unitID = IC2016_AY.UNITID;

SELECT HD2016.UNITID, SFA1516_P1.SGRNT_T, SFA1516_P1.IGRNT_T, SFA1516_P1.LOAN_T, SFA1516_P1.FLOAN_T, SFA1516_P1.SCFA1N, SFA1516_P1.SCFA1P, SFA1516_P1.SCFA11P, SFA1516_P1.SCFA12P, SFA1516_P1.SCFA13P, SFA1516_P1.SCFA14P, SFA1516_P1.SCFY1N, SFA1516_P1.SCFY1P, SFA1516_P1.ANYAIDP, SFA1516_P1.FGRNT_P, SFA1516_P1.FGRNT_A, SFA1516_P1.SGRNT_P, SFA1516_P1.SGRNT_A, SFA1516_P1.IGRNT_P, SFA1516_P1.IGRNT_A, SFA1516_P1.LOAN_P, SFA1516_P1.LOAN_A, SFA1516_P1.UAGRNTT, SFA1516_P1.AGRNT_P, SFA1516_P1.AGRNT_A, SFA1516_P1.PGRNT_P, SFA1516_P1.PGRNT_A, SFA1516_P1.OFGRT_P, SFA1516_P1.OFGRT_A, SFA1516_P1.FLOAN_P, SFA1516_P1.FLOAN_A, SFA1516_P1.OLOAN_P, SFA1516_P1.OLOAN_A, SFA1516_P1.UAGRNTP, SFA1516_P1.UAGRNTA, SFA1516_P1.UPGRNTP, SFA1516_P1.UPGRNTA, SFA1516_P1.UFLOANP, SFA1516_P1.UFLOANA, SFA1516_P1.UAGRNTN, SFA1516_P1.UFLOANT, SFA1516_P1.AGRNT_T, SFA1516_P1.FGRNT_T, SFA1516_P1.PGRNT_T, SFA1516_P1.OFGRT_T, SFA1516_P1.OLOAN_T, SFA1516_P1.AIDFSIP, SFA1516_P1.SCFY11P, SFA1516_P1.SCFY12P, SFA1516_P1.SCFY13P, SFA1516_P1.SCFY14P, SFA1516_P2.GIS4A2, SFA1516_P2.GIS4T12, SFA1516_P2.GIS4A12, SFA1516_P2.GIS4T22, SFA1516_P2.GIS4A22, SFA1516_P2.GIS4T32, SFA1516_P2.GIS4A32, SFA1516_P2.GIS4T42, SFA1516_P2.GIS4A42, SFA1516_P2.GIS4T52, SFA1516_P2.GIS4A52, SFA1516_P2.GRN4A2, SFA1516_P2.GRN4T12, SFA1516_P2.GRN4A12, SFA1516_P2.GRN4T22, SFA1516_P2.GRN4A22, SFA1516_P2.GRN4T32, SFA1516_P2.GRN4A32, SFA1516_P2.GRN4T42, SFA1516_P2.GRN4A42, SFA1516_P2.GRN4T52, SFA1516_P2.GRN4A52
FROM (HD2016 INNER JOIN SFA1516_P2 ON HD2016.UNITID = SFA1516_P2.UNITID) INNER JOIN SFA1516_P1 ON (HD2016.UNITID = SFA1516_P1.UNITID) AND (HD2016.UNITID = SFA1516_P1.UNITID);

SELECT UNITID, HRTOTLM, HRTOTLW, HRTOTLT, HRAIANT, HRAIANM, HRAIANW, HRASIAT, HRASIAM, HRASIAW, HRBKAAT, HRBKAAM, HRBKAAW, HRHISPT, HRHISPM, HRHISPW, HRNHPIT, HRNHPIM, HRNHPIW, HRWHITT, HRWHITM, HRWHITW, HR2MORT, HR2MORM, HR2MORW, SISCAT, FACSTAT, ARANK
FROM S2016_IS;

Note: The predictive features were all pulled from the 2016-2017 database.  The files produced from thee queries are joined together in the data cleaning jupyter notebook file.


### Data Files:

**cs5100_project.csv**: Graduation rate data corrisponding to the first query.
**fall_enrollment.csv**: Enrollment counts used to filter school in data set.
**main_data.csv** & **main_data2.csv**: Predictive features queried from the 2016-2017 data.
**teaching_faculty.csv**: Predictive feature regarding instuctor diversity.
**final_data.csv**: Final data on which the algorithms of interest were implimented. This data is creates from *1_data_cleaning.ipynb*.

### Code Files:

**1_data_cleaning.ipynb**: Pre-processes and joins the IPEDS data for the study.
**2_model_building.ipynb**: Builds the models and runs the experiments.
**genetic_algorithm.py**: Class implimentation for the genetic algorithm use in the study.

Note: To run files, data paths need to get updated to the local computer. To recreate the final_data.csv file, run *1_data_cleaning.ipynb*.  To just run the experiments, run *2_model_building.ipynb*. 